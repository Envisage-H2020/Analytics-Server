<!doctype html>
<html lang="en">

<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="js/jquery-3.2.1.slim.min.js"></script>
<script src="js/popper.min.js"></script>
<!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>-->
<script src="js/Chart.min.js"></script>
<!--<script src="../../dist/Chart.bundle.js"></script>-->
<script src="../dashboardtest/utils.js"></script>


<!--<script src="dashboardtest/bootstrap/dist/js/bootstrap.js"></script>
<script src="../dashboardtest/bootstrap/dist/css/bootstrap.css"></script>-->
<!--<script src="../dashboardtest/TimeToTaskBar.js"></script>-->
<link rel="stylesheet" href="../dashboardtest/font-awesome/css/font-awesome.min.css">

<!--<script src="../dashboardtest/node_modules/chart.js/dist/doc/Chart.min.js"></script>-->

  <head>
    <title>Wind Lab Dashboard</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<link rel="stylesheet"  href="../dashboardtest/chartWrapper.css">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
  </head>





  <div class='container-fluid'>
    <h1 class="text-center text-info" >Wind Lab</h1>
    <!--Time selector-->
<!--<input type="text" name="daterange" value="01/01/2015 1:30 PM - 01/01/2015 2:00 PM" />-->
    <div class='row'>
      <!--ACTIVE STUDENTS-->
      <div class='col-md-3'>
        <div class='card mb-3'>
        <h6 class="card-header bg-info text-white">Students</h6>
        <div class='card-body'>
          <!--<div class="card-body text-center text-info">
            <h1 class="display-1">10</h1>
            Number of students active in the lab. <!-- in {time periode}-->
          <!--</div>-->
          <div class="card-body text-center text-info">
            <h1 class="display-3">NO_STUDENTS_TO_SHOW</h1>
            out of <strong>TOTAL_STUDENTS</strong>
            Students
          </div>
        </div>
      </div>

      <!--cluster pie-->
        <div class='card mb-3'>
        <h6 class="card-header bg-info text-white">Archetypal Clusters</h6>

        <div class='card-body'>
          <p >
            <small>
              The 4 archetypes of all students.
            </small>
          </p>
          <canvas id="clusterPie" height="1" width="1" />
        </div>
      </div>

      </div>



    <!--TABLE WITH TASKS COMPLETED-->

    <div class='col-md-9'>
      <div class='card mb-3'>
      <h6 class="card-header bg-info text-white">Tasks completed</h6>
      <div class='card-body'>
        <i class="fa fa-check text-success"></i><small> Task complete</small>
      </div>
      <table class="table table-sm table-responsive table-bordered table-hover text-center">
        <!--<caption>List of users</caption>-->
        <thead>
          <tr>
            <th></th>
            <th>Reached correct power</th>
            <th>Made Profit</th>
            <th>Turned turbine on/off</th>
            <th>Repaired turbine</th>
            <th>Changed simulation speed</th>
          </tr>
        </thead>
        <tbody>
          WIND_TABLES
        </tbody>
      </table>
    </div>
    </div>
    <!--MEDIAN TIME ON TASK-->

    <!--<div class="chartWrapper">
    <div class="chartAreaWrapper">
      <canvas id="medianTimeOnTask" height="300" width="1200"/>
    </div>
    </div>-->





    <div class='col-md-6'>
      <div class='card mb-3'>
      <h6 class="card-header bg-info text-white">Student score</h6>



      <div class='card-body'>
        <p >
          <small>
            The score the student achieved after completing the game.
          </small>
        </p>
        <canvas id="medianTimeOnTask"></canvas>

      </div>


    </div>
    </div>

    <!--<div class='col-md-6'>
      <div class='card mb-3'>
      <h6 class="card-header bg-info text-white">TEST Median Time on Task</h6>



      <div class='card-body'>
        <p >
          <small>
            The median time it took the students to reach correct power from a state of being either under or over powered.
          </small>
        </p>
        <div class="chartWrapper">
      <div class="chartAreaWrapper">
      <div class="chartAreaWrapper2">
          <canvas id="chart-FuelSpend" height="400" width="2000"></canvas>
      </div>
      <!--<canvas id="axis-FuelSpend" height="300" width="1" ></canvas>-->
      <!--</div>

    </div>
  </div>
  </div>
  </div>-->

    <!--POWER STATUS-->
    <div class='col-md-6'>
      <div class='card mb-3'>
      <h6 class="card-header bg-info text-white">Power Status</h6>

      <div class='card-body'>
        <p >
          <small>
            The amount of time the students had the wind simulation correctly, under and over powered.
          </small>
        </p>
        <canvas id="powerStatus" height="3" width="4" />
      </div>
    </div>
    </div>

    <!------------------------------>



    <!------------------------------>
</div>

<script>
var list = new Array();
var pageList = new Array();
var currentPage = 1;
var numberPerPage = 10;
var numberOfPages = 1;   // calculates the total number of pages


var pie = document.getElementById("clusterPie").getContext('2d');
var clusterPie = new Chart(pie, {
      type: 'pie',
      data: {
          datasets: [{
              data: [
                  CLUSTER_COUNTS
              ],
              backgroundColor: [
                  window.chartColors.green,
                  window.chartColors.yellow,
                  window.chartColors.orange,
                  window.chartColors.red,
              ],
              label: 'Dataset 1'
          }],
          labels: [
              "III: Reflective",
              "II: Advanced",
              "I: Beginner",
              "<I: No problem solver"
          ]
      },
      options: {
          responsive: true,
          legend: {
              position: 'bottom',
          },
      }
  });

//Median time on task chart
var ctx = document.getElementById("medianTimeOnTask").getContext('2d');
var myChart = new Chart(ctx, {
  type: 'bar',
    data: {
        labels: [STUDENT_NAMES],
        datasets: [
          {
              type: 'line',
              fill: false,
              pointRadius: 0,
              backgroundColor: window.chartColors.white,
              borderColor: window.chartColors.green,
              label: 'Class Median',
              data: [COMMON_MEDIAN]
          },{
            //exbackgroundColor: [window.chartColors.green,window.chartColors.green,window.chartColors.green,window.chartColors.yellow,window.chartColors.orange,window.chartColors.yellow,window.chartColors.yellow,window.chartColors.orange,window.chartColors.yellow,window.chartColors.orange],
            backgroundColor: [CHART_COLORS],
            borderColor: window.chartColors.green,
            label: ['Game score, colored by cluster'],
            data: [INDIVIDUAL_MEDIAN]
        }
        ]
    },
    options: {
      legend: {
          position: 'bottom',
      },
        scales: {
            yAxes: [{
              scaleLabel: {
                                display: true,
                                labelString: 'Score'
                            },
                ticks: {
                    beginAtZero:true
                }
            }],
            xAxes: [{
              scaleLabel: {
                                display: false,
                                labelString: 'Students'
                            },
                ticks: {
                }
            }]
        }


    }
});

// power status chart
var ctx = document.getElementById("powerStatus").getContext('2d');
var powerStatus = new Chart(ctx, {
    type: 'horizontalBar',
    data: {
        labels: [STUDENT_NAMES],
        datasets: [{
            label: 'Correctly powered',
            data: [CORRECT],
            backgroundColor:
              window.chartColors.green,
            borderWidth: 1
        },
        {
            label: 'Under powered',
            data: [UNDER],
            backgroundColor:
              window.chartColors.white,
            borderWidth: 1
        },
        {
            label: 'Over powered',
            data: [OVER],
            backgroundColor:
              window.chartColors.grey,
            borderWidth: 1
        }]
    },
    options: {
      legend: {
          position: 'bottom',
      },
        scales: {
            yAxes: [{
              //barThickness:4,

              stacked: true,
                ticks: {
                    beginAtZero:true,
                },
                scaleLabel: {
                                  display: false,
                                  labelString: 'Students'
                              }
            }],
            xAxes: [{
              scaleLabel: {
                                display: true,
                                labelString: 'Percentage of time spent in simulation'
                            },
              stacked: true,
              ticks: {
                beginAtZero: true,
                max: 100
              }
        }]
        }


    }
});



///-----------------------TEST with scrolable chart----///

function load(){
    numberOfPages = getNumberOfPages();
}

function generateLabels() {
  var chartLabels = [];
  for (x = 0; x < 10; x++) {
    chartLabels.push("Student" + x);
  }
  return chartLabels;
}

function generateData() {
  var chartData = [];
  for (x = 0; x < 10; x++) {
    chartData.push(Math.floor((Math.random() * 100) + 1));
  }
  return chartData;
}
function generateMedianData() {
  var chartData = [];
  for (x = 0; x < 10; x++) {
    chartData.push(10);
  }
  return chartData;
}

function addData(numData, chart){
		for (var i = 0; i < numData; i++){
    		chart.data.datasets[0].data.push(10);
        chart.data.datasets[1].data.push(Math.random() * 100);
    		chart.data.labels.push("Student+" + i);
    		var newwidth = $('.chartAreaWrapper2').width() + 100;
    		$('.chartAreaWrapper2').width(newwidth);
    }
}

var chartData = {
  labels: generateLabels(),
  datasets: [{
    type:'line',
    fill: false,
    pointRadius: 0,
    backgroundColor: window.chartColors.yellow,
    borderColor: window.chartColors.yellow,
    label: "Class Median",
    data: generateMedianData()
  },{
    backgroundColor:
      window.chartColors.red,
    label: "Test Data Set",
    data: generateData()
  }
  ]
};

$(function() {
  /*var canvasFuelSpend = $('#chart-FuelSpend');
  var chartFuelSpend = new Chart(canvasFuelSpend, {
    type: 'bar',
    data: chartData,
    maintainAspectRatio: false,
    responsive: true,
    options: {
      tooltips: {
        titleFontSize: 0,
        titleMarginBottom: 0,
        bodyFontSize: 12
      },
      legend: {
        display: true,
        position: 'bottom',
      },
      scales: {
        xAxes: [{
          ticks: {
            maxRotation: 90,
          minRotation: 90,
            fontSize: 12,
            display: true
          }
        }],
        yAxes: [{
          ticks: {
            fontSize: 12,
            beginAtZero: true
          }
        }]
      },
      animation: {
        onComplete: function() {
          var sourceCanvas = chartFuelSpend.chart.canvas;
          var copyWidth = chartFuelSpend.scales['y-axis-0'].width - 10;
          var copyHeight = chartFuelSpend.scales['y-axis-0'].height + chartFuelSpend.scales['y-axis-0'].top + 10;
          var targetCtx = document.getElementById("axis-FuelSpend").getContext("2d");
          targetCtx.canvas.width = copyWidth;
          targetCtx.drawImage(sourceCanvas, 0, 0, copyWidth, copyHeight, 0, 0, copyWidth, copyHeight);
        }
      }
    }
  });
  addData(10, chartFuelSpend);*/
});


$(function() {
  /*$('input[name="daterange"]').daterangepicker({
    timePicker: true,
    timePickerIncrement: 30,
    locale: {
      format: 'MM/DD/YYYY h:mm A'
    },
    ranges: {
      'Today': [moment(), moment()],
      'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
      'Last 7 Days': [moment().subtract(6, 'days'), moment()],
      'Last 30 Days': [moment().subtract(29, 'days'), moment()],
      'This Month': [moment().startOf('month'), moment().endOf('month')],
      'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
    }
  });*/

  $(window).scroll(function() {
    if ($('input[name="daterange"]').length) {
      $('input[name="daterange"]').daterangepicker("close");
    }
  });
});




</script>
